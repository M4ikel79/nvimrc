-- lua/plugins/coding/copilot.lua
-- GitHub Copilot integration plugin
return {
  "github/copilot.vim",
  event = "InsertEnter",
  config = function()
    -- Copilot settings
    vim.g.copilot_no_tab_map = true -- We'll define our own Tab behavior
    vim.g.copilot_assume_mapped = true

    -- Optional: Set Node.js path if needed
    -- vim.g.copilot_node_command = "~/.nodenv/versions/18.18.0/bin/node"

    -- Optional: Configure proxy if needed
    -- vim.g.copilot_proxy = 'http://localhost:3128'
    -- vim.g.copilot_proxy_strict_ssl = false

    -- File type settings - enable for most, disable for specific ones
    vim.g.copilot_filetypes = {
      ["*"] = true,
      gitcommit = false,
      gitrebase = false,
      TelescopePrompt = false,
      ["neo-tree-popup"] = false,
    }

    -- Workspace folders for better context
    vim.g.copilot_workspace_folders = {}

    -- Custom highlight for Copilot suggestions
    vim.api.nvim_create_autocmd("ColorScheme", {
      pattern = "*",
      callback = function()
        vim.api.nvim_set_hl(0, "CopilotSuggestion", {
          fg = "#6272A4",
          italic = true,
          force = true,
        })
      end,
    })
  end,
}
